/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */
defaultTasks "build"
import java.io.File

project.buildDir = new File(project.projectDir, "/errbot/")

task build() {
    dependsOn "copyPlugin"
    dependsOn "initialize"
}

task initialize() {
    doLast {
        mkdir "${project.buildDir}/plugins"
        mkdir "${project.buildDir}/data"
    }
}

task clean(type: Delete) {
    delete "${project.buildDir}/plugins"
    delete "${project.buildDir}/data"
    delete "${project.buildDir}/errbot.log"
}

task copyPlugin(type: Copy) {
    from(project.projectDir) {
        include '**/*.md'
        include '**/*.json'
        include '**/*.plug'
        include '**/*.py'
        include '**/*.txt'
        exclude '.cache'
        exclude '.gradle'
        exclude '.idea'
        exclude '.venv'
        exclude 'errbot'
        exclude 'gradle'
        exclude 'build'
    }
    into "${project.buildDir}/plugins/${project.name}"
}
